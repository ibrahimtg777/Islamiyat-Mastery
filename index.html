<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CAIE Premium Notes</title>
<style>
    body, html {
        margin: 0;
        padding: 0;
        height: 100%;
        font-family: Arial, sans-serif;
        overflow: hidden;
    }
    /* Background video */
    #bg-video {
        position: fixed;
        right: 0;
        bottom: 0;
        min-width: 100%;
        min-height: 100%;
        z-index: -2;
        object-fit: cover;
    }
    /* Rain overlay */
    .rain {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: url('https://i.ibb.co/3mtLfph/rain.png');
        animation: rain 0.5s linear infinite;
        z-index: -1;
        opacity: 0.3;
    }
    @keyframes rain {
        0% {background-position: 0 0;}
        100% {background-position: 0 100%;}
    }
    /* Glassmorphism container */
    .container {
        position: relative;
        max-width: 900px;
        margin: auto;
        top: 10%;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        padding: 20px;
        border-radius: 15px;
        color: white;
        text-align: center;
    }
    button {
        background: rgba(255,255,255,0.2);
        border: none;
        padding: 10px 20px;
        border-radius: 10px;
        color: white;
        cursor: pointer;
        margin: 5px;
        transition: background 0.3s;
    }
    button:hover {
        background: rgba(255,255,255,0.4);
    }
    select {
        padding: 8px;
        border-radius: 5px;
        border: none;
        margin: 5px;
    }
    iframe {
        width: 100%;
        height: 400px;
        background: white;
        border: none;
        margin-top: 20px;
    }
</style>
</head>
<body>

<!-- Background forest rain video -->
<video autoplay muted loop id="bg-video">
    <source src="https://cdn.pixabay.com/vimeo/239902808/rain-forest-13737.mp4?width=1280&hash=6e9b8a02a24f" type="video/mp4">
</video>

<!-- Rain overlay -->
<div class="rain"></div>

<!-- Thunderstorm sound -->
<audio id="thunder" loop autoplay>
    <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_f3b0f3a19d.mp3?filename=thunderstorm-ambient-6981.mp3" type="audio/mpeg">
</audio>

<div class="container">
    <h1>CAIE Premium Notes</h1>
    <p>Unlock access to all subjects for just $6.99</p>
    
    <!-- PayFast demo checkout -->
    <form action="https://sandbox.payfast.co.za/eng/process" method="post">
        <input type="hidden" name="merchant_id" value="10000100">
        <input type="hidden" name="merchant_key" value="46f0cd694581a">
        <input type="hidden" name="return_url" value="http://localhost/index.html?paid=true">
        <input type="hidden" name="cancel_url" value="http://localhost/index.html">
        <input type="hidden" name="notify_url" value="http://localhost/notify.php">
        <input type="hidden" name="amount" value="6.99">
        <input type="hidden" name="item_name" value="CAIE Premium Notes Access">
        <button type="submit">Buy Access â€“ $6.99</button>
    </form>

    <br>

    <!-- Notes menu -->
    <div id="notes-section" style="display:none;">
        <select id="subjectSelect">
            <option value="">Select Subject</option>
            <option value="islamiyat">Islamiyat</option>
            <option value="physics">Physics</option>
            <option value="chemistry">Chemistry</option>
            <option value="math">Mathematics</option>
            <option value="biology">Biology</option>
            <option value="english">English</option>
        </select>

        <select id="chapterSelect">
            <option value="">Select Chapter</option>
            <option value="ch1">Chapter 1</option>
        </select>

        <button onclick="loadNotes()">Load Notes</button>

        <iframe id="notesFrame"></iframe>
    </div>

    <br>
    <button onclick="toggleThunder()">Toggle Thunder Sound</button>
</div>

<script>
    // Check if payment was successful
    if (window.location.search.includes("paid=true")) {
        document.getElementById('notes-section').style.display = 'block';
    }

    function loadNotes() {
        let subject = document.getElementById("subjectSelect").value;
        let chapter = document.getElementById("chapterSelect").value;
        if (subject && chapter) {
            document.getElementById("notesFrame").src = `notes/${subject}/${chapter}.html`;
        } else {
            alert("Please select both subject and chapter.");
        }
    }

    function toggleThunder() {
        let audio = document.getElementById("thunder");
        audio.muted = !audio.muted;
    }
</script>

</body>
</html>
